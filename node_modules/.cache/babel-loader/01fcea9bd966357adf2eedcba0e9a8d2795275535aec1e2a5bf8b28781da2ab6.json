{"ast":null,"code":"const fetch = require(\"node-fetch\");\nconst accessToken = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJNYXBDbGFpbXMiOnsiYXVkIjoiaHR0cDovLzIwLjI0NC41Ni4xNDQvZXZhbHVhdGlvbi1zZXJ2aWNlIiwiZW1haWwiOiJoaW1hbmkucGF0ZWxAbHB1LmluIiwiZXhwIjoxNzUyNDcyNDg4LCJpYXQiOjE3NTI0NzE1ODgsImlzcyI6IkFmZm9yZCBNZWRpY2FsIFRlY2hub2xvZ2llcyBQcml2YXRlIExpbWl0ZWQiLCJqdGkiOiJkZjczYzIxMy1kMTE3LTRkMzItOTgzNi1lZGY0NDg1NzhiNjMiLCJsb2NhbGUiOiJlbi1JTiIsIm5hbWUiOiJoaW1hbmkgcGF0ZWwiLCJzdWIiOiJiNGIxYTk4NC1iYTk0LTQ2MzYtODFlMi1mZTQwNTZlNjljMzgifSwiZW1haWwiOiJoaW1hbmkucGF0ZWxAbHB1LmluIiwibmFtZSI6ImhpbWFuaSBwYXRlbCIsInJvbGxObyI6IjEyMjAwNTI2IiwiYWNjZXNzQ29kZSI6IkNaeXBRSyIsImNsaWVudElEIjoiYjRiMWE5ODQtYmE5NC00NjM2LTgxZTItZmU0MDU2ZTY5YzM4IiwiY2xpZW50U2VjcmV0IjoiY2JEckpoY1VodHlmeGNuciJ9.ZxpYEI_JK5euI-HLk-HA8kWhg2ugKkBdQ7UnTgCiSNY\";\nasync function Log(stack, level, packageName, message) {\n  try {\n    const res = await fetch(\"http://20.244.56.144/eva1uation-service/log\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${accessToken}`\n      },\n      body: JSON.stringify({\n        stack,\n        level,\n        package: packageName,\n        message\n      })\n    });\n    if (!res.ok) {\n      const errText = await res.text();\n      console.error(\" Log failed:\", errText);\n    } else {\n      console.log(\" Log sent successfully\");\n    }\n  } catch (err) {\n    console.error(\" Logger error:\", err.message);\n  }\n}\n_c = Log;\nmodule.exports = Log;\nvar _c;\n$RefreshReg$(_c, \"Log\");","map":{"version":3,"names":["fetch","require","accessToken","Log","stack","level","packageName","message","res","method","headers","body","JSON","stringify","package","ok","errText","text","console","error","log","err","_c","module","exports","$RefreshReg$"],"sources":["C:/12200526/question1/src/middleware/logger.js"],"sourcesContent":["const fetch = require(\"node-fetch\");\r\n\r\n\r\nconst accessToken = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJNYXBDbGFpbXMiOnsiYXVkIjoiaHR0cDovLzIwLjI0NC41Ni4xNDQvZXZhbHVhdGlvbi1zZXJ2aWNlIiwiZW1haWwiOiJoaW1hbmkucGF0ZWxAbHB1LmluIiwiZXhwIjoxNzUyNDcyNDg4LCJpYXQiOjE3NTI0NzE1ODgsImlzcyI6IkFmZm9yZCBNZWRpY2FsIFRlY2hub2xvZ2llcyBQcml2YXRlIExpbWl0ZWQiLCJqdGkiOiJkZjczYzIxMy1kMTE3LTRkMzItOTgzNi1lZGY0NDg1NzhiNjMiLCJsb2NhbGUiOiJlbi1JTiIsIm5hbWUiOiJoaW1hbmkgcGF0ZWwiLCJzdWIiOiJiNGIxYTk4NC1iYTk0LTQ2MzYtODFlMi1mZTQwNTZlNjljMzgifSwiZW1haWwiOiJoaW1hbmkucGF0ZWxAbHB1LmluIiwibmFtZSI6ImhpbWFuaSBwYXRlbCIsInJvbGxObyI6IjEyMjAwNTI2IiwiYWNjZXNzQ29kZSI6IkNaeXBRSyIsImNsaWVudElEIjoiYjRiMWE5ODQtYmE5NC00NjM2LTgxZTItZmU0MDU2ZTY5YzM4IiwiY2xpZW50U2VjcmV0IjoiY2JEckpoY1VodHlmeGNuciJ9.ZxpYEI_JK5euI-HLk-HA8kWhg2ugKkBdQ7UnTgCiSNY\";\r\n\r\nasync function Log(stack, level, packageName, message) {\r\n  try {\r\n    const res = await fetch(\"http://20.244.56.144/eva1uation-service/log\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${accessToken}`\r\n      },\r\n      body: JSON.stringify({\r\n        stack,\r\n        level,\r\n        package: packageName,\r\n        message\r\n      })\r\n    });\r\n\r\n    if (!res.ok) {\r\n      const errText = await res.text();\r\n      console.error(\" Log failed:\", errText);\r\n    } else {\r\n      console.log(\" Log sent successfully\");\r\n    }\r\n  } catch (err) {\r\n    console.error(\" Logger error:\", err.message);\r\n  }\r\n}\r\n\r\nmodule.exports = Log;\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,YAAY,CAAC;AAGnC,MAAMC,WAAW,GAAG,2tBAA2tB;AAE/uB,eAAeC,GAAGA,CAACC,KAAK,EAAEC,KAAK,EAAEC,WAAW,EAAEC,OAAO,EAAE;EACrD,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMR,KAAK,CAAC,6CAA6C,EAAE;MACrES,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAE,UAAUR,WAAW;MACxC,CAAC;MACDS,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBT,KAAK;QACLC,KAAK;QACLS,OAAO,EAAER,WAAW;QACpBC;MACF,CAAC;IACH,CAAC,CAAC;IAEF,IAAI,CAACC,GAAG,CAACO,EAAE,EAAE;MACX,MAAMC,OAAO,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,CAAC;MAChCC,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEH,OAAO,CAAC;IACxC,CAAC,MAAM;MACLE,OAAO,CAACE,GAAG,CAAC,wBAAwB,CAAC;IACvC;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZH,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEE,GAAG,CAACd,OAAO,CAAC;EAC9C;AACF;AAACe,EAAA,GAzBcnB,GAAG;AA2BlBoB,MAAM,CAACC,OAAO,GAAGrB,GAAG;AAAC,IAAAmB,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}